<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Driver Libraries" />
<meta name="DC.relation" scheme="URI" content="GUID-C04D97AB-D6E0-4CF5-9A80-CA64E36B6199.html" />
<meta name="DC.relation" scheme="URI" content="GUID-DFB9A1FE-5BBB-4A10-A4B0-430BA7B9AF94.html" />
<meta name="DC.relation" scheme="URI" content="GUID-4321CAFA-57B5-4633-9D43-0AE24B87C101.html" />
<meta name="DC.relation" scheme="URI" content="GUID-0FFCD458-7F10-49C8-B068-E4E4B5439C47.html" />
<meta name="DC.relation" scheme="URI" content="GUID-BFFB8AD8-CD11-49AB-8C23-F860A883EFE6.html" />
<meta name="DC.relation" scheme="URI" content="GUID-013A85E2-6948-44FA-907E-7DC945B5CE82.html" />
<meta name="DC.relation" scheme="URI" content="GUID-89A8332D-B4D0-4989-8602-EACDE3EE74AC.html" />
<meta name="DC.relation" scheme="URI" content="GUID-B2925496-394D-47ED-BD1E-1AB2149934FA.html" />
<meta name="DC.relation" scheme="URI" content="GUID-3DC66955-0F7E-4747-9790-893CA81987A6.html" />
<meta name="DC.relation" scheme="URI" content="GUID-84AD8BE3-4D9F-4F36-AB5F-160B9B90F177.html" />
<meta name="DC.relation" scheme="URI" content="GUID-E5D1E930-88E3-47F4-9ECD-EDE02BF9B07D.html" />
<meta name="DC.relation" scheme="URI" content="GUID-3B80B7B5-A8B5-436E-9135-38CDEA3A638B.html" />
<meta name="DC.relation" scheme="URI" content="GUID-41B61931-E124-4512-A689-5B0643F249E8.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="driver-libraries" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>Driver Libraries</title>
<meta name="Microsoft.Help.Id" content="GUID-EDFB1AB8-CD6B-446F-8E25-F2167287A1AF-driver-libraries" />
<meta name="Microsoft.Help.TocParent" content="GUID-EDFB1AB8-CD6B-446F-8E25-F2167287A1AF" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB® Harmony Core Library Reference A 11/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-4FA4B38A-8C7F-46A3-9D08-4B8C5CE26712"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="driver-libraries">
<h1 class="title topictitle1" id="ariaid-title1">Driver Libraries</h1><div class="body"><p class="p">MPLAB Harmony device drivers (usually referred to as "drivers") provide simple, highly abstracted C-language interfaces to peripherals and other resources. A driver's interface allows applications and other client modules to easily interact with the peripheral it controls using consistent usage models.</p>
<p class="p"><strong class="ph b">Harmony Driver Modes</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d182218e21"><span>Asynchronous Mode</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d182218e23"><span>Synchronous Mode</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e21 "><span>Works in both Bare-Metal and RTOS environment</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e23 "><span>Works only in RTOS Environment</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e21 "><span>Provides Non-Blocking behavior</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e23 "><span>Provides Blocking behavior. Application thread gets blocked on a semaphore until transfer request is completed.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e21 "><span>API's return with a valid handle which can be used to check whether transfer request is accepted</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e23 "><span>API's return true or false to indicate whether the whole transfer is completed.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e21 "><span><strong class="ph b">For Bare-Metal</strong> a dedicated task routine is either called from SYS_Tasks() or is interrupt driven to process the data from the instance queue. <strong class="ph b">For RTOS</strong> either a blocking dedicated thread is created for task routine or is interrupt driven to process the data from the instance queue.</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d182218e23 "><span>As the Driver works in complete blocking behavior there is no task routine generated.</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Driver Usage Models</strong></p>
<br /><img class="image" src="GUID-4A4613F3-8325-4A40-9D16-BD539E047367-low.png" alt="harmony_driver_usage_model" /><br /><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Single instance, single client</strong></p>
<ul class="ul"><li class="li"><p class="p">The driver manages a single instance of the peripheral and there is a single client (application) accessing the driver instance</p>
</li>
</ul>
</li>
<li class="li"><p class="p"><strong class="ph b">Multiple instances, single client (one client per driver instance)</strong></p>
<ul class="ul"><li class="li"><p class="p">The driver manages multiple instances of the peripheral and there is a single client to each instance of the driver.</p>
</li>
<li class="li"><p class="p">For example, the SPI driver instance 0 manages SPI peripheral instance 3 and SPI driver instance 1 manages SPI peripheral instance 5</p>
</li>
</ul>
</li>
<li class="li"><p class="p"><strong class="ph b">Single instance, multiple clients</strong></p>
<ul class="ul"><li class="li"><p class="p">Multiple clients to an instance of the driver.</p>
</li>
<li class="li"><p class="p">For example, there can be two application clients; one client interacting with SPI EEPROM and the second client interacting with SPI based temperature sensor, both interfaced to the same instance of SPI peripheral.</p>
</li>
</ul>
</li>
</ul>
<p class="p"><strong class="ph b">Harmony Drivers provide</strong></p>
<ul class="ul"><li class="li"><p class="p"><strong class="ph b">Same API for all the instances of a peripheral</strong></p>
<ul class="ul"><li class="li"><p class="p">This allows the application to remain the same when the peripheral instance is changed and across different platforms</p>
</li>
</ul>
</li>
</ul>
<br /><img class="image" src="GUID-DAE1EF6F-8AF0-4536-81C3-8EE089FAFB92-low.png" alt="harmony_driver_api_table" /><br /><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Support for multiple clients</strong></p>
<ul class="ul"><li class="li"><p class="p">Seamlessly handle client specific differences. Drivers allow multiple clients to a driver instance.</p>
</li>
<li class="li"><p class="p">For example, there can be multiple application clients to a SPI driver instance having multiple SPI slaves. The SPI slave specific information such as clock phase, clock polarity, clock speed and chip select are all handled by the SPI driver based on the client that submitted the request</p>
</li>
</ul>
</li>
<li class="li"><p class="p"><strong class="ph b">Queue support (Asynchronous Mode)</strong></p>
<ul class="ul"><li class="li"><p class="p">Drivers allow queuing of multiple requests. Each instance of a driver has a dedicated queue.</p>
</li>
<li class="li"><p class="p">The requests submitted by all the clients of the driver instance are queued in the driver instance queue.</p>
</li>
<li class="li"><p class="p">Queuing allows the application to submit requests before waiting for the driver to finish the previous requests.</p>
</li>
<li class="li"><p class="p">For each submitted request, the application can choose to get notified or poll the status of the submitted request using the handle provided by the driver for the submitted request</p>
</li>
</ul>
</li>
<li class="li"><p class="p"><strong class="ph b">Cache management</strong></p>
<ul class="ul"><li class="li"><p class="p">Drivers manage cache related operations on devices that have cache, thereby simplifying application development.</p>
</li>
</ul>
</li>
</ul>
<p class="p"><strong class="ph b">Harmony Driver Execution Flow</strong></p>
<br /><img class="image" src="GUID-B606D19F-534A-4F24-8BFB-6B3674AD9F73-low.png" alt="harmony_driver_execution_flow" /><br /></div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="GUID-DFB9A1FE-5BBB-4A10-A4B0-430BA7B9AF94.html">Common Driver Library</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-4321CAFA-57B5-4633-9D43-0AE24B87C101.html">I2C Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-0FFCD458-7F10-49C8-B068-E4E4B5439C47.html">Memory Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-BFFB8AD8-CD11-49AB-8C23-F860A883EFE6.html">NAND Flash Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-013A85E2-6948-44FA-907E-7DC945B5CE82.html">SDMMC Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-89A8332D-B4D0-4989-8602-EACDE3EE74AC.html">SDSPI Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-B2925496-394D-47ED-BD1E-1AB2149934FA.html">SPI Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-3DC66955-0F7E-4747-9790-893CA81987A6.html">USART Driver</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-84AD8BE3-4D9F-4F36-AB5F-160B9B90F177.html">I2C EEPROM Drivers</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-E5D1E930-88E3-47F4-9ECD-EDE02BF9B07D.html">SPI EEPROM Drivers</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-3B80B7B5-A8B5-436E-9135-38CDEA3A638B.html">SPI Flash Drivers</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-41B61931-E124-4512-A689-5B0643F249E8.html">SQI Flash Drivers</a></strong><br />
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-C04D97AB-D6E0-4CF5-9A80-CA64E36B6199.html">MPLAB® Harmony Core Library</a></div>
</div>
</div></body>
</html>